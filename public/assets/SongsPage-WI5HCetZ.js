import{j as o,k as c,s as m,l as S,m as P,g as x,h as O,r as u,H as f,S as E}from"./index-7Jg1ChCf.js";const D=()=>o.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024",className:"DeleteIcon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle",marginLeft:5},children:[o.jsx("path",{d:"M672.768 832.512c12.8 0 23.552-9.216 23.552-20.48V413.184h-46.592v398.848c-0.512 11.264 9.728 20.48 23.04 20.48z",fill:"#FFA28D"}),o.jsx("path",{d:"M511.488 832.512c13.312 0 23.04-9.216 23.04-20.48V413.184h-46.592v398.848c0 11.264 10.752 20.48 23.552 20.48z",fill:"#FFD561"}),o.jsx("path",{d:"M350.208 832.512c12.8 0 23.04-9.216 23.04-20.48V413.184h-46.08v398.848c0 11.264 10.752 20.48 23.04 20.48z",fill:"#FFA28D"}),o.jsx("path",{d:"M921.088 182.272h-191.488V98.816c0-18.944-17.408-34.304-38.912-34.304h-358.4c-21.504 0-38.912 15.872-39.424 34.304v83.968H102.4c-21.504 0-38.912 15.36-38.912 34.304V378.88c0 18.944 17.408 34.304 38.912 34.304h57.344v512.512c0 18.944 16.896 34.304 38.4 34.304h626.688c21.504 0 38.912-15.872 38.912-34.304V413.184h57.344c20.992 0 38.4-15.36 38.4-34.304V216.576c0-18.432-17.408-34.304-38.4-34.304zM370.688 133.12h281.088v43.008H370.688V133.12z m414.72 758.272H237.056V413.184H785.92v478.208z m96.256-546.816H140.8V251.392h740.864v93.184z",fill:"#5FFFBA"})]}),A=()=>{const e=c();return n=>e(m.actions.setSong(n))},R=()=>{const e=c();return n=>e(m.actions.setSongNew(n))},j=()=>{const e=c();return n=>e(m.actions.deleteSong(n))},w=Object.freeze(Object.defineProperty({__proto__:null,useDeleteSong:j,useSetSongs:A,useSetSongsNew:R},Symbol.toStringTag,{value:"Module"})),v=()=>S(e=>e.songs.songs),T=Object.freeze(Object.defineProperty({__proto__:null,useGetSongs:v},Symbol.toStringTag,{value:"Module"})),i={...w,...T};var r={ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\hairo\\AppData\\Roaming",ChocolateyInstall:"C:\\ProgramData\\chocolatey",ChocolateyLastPathUpdate:"133027162331561026",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_13272_NKIYUZNJENXBTZRM",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"DESKTOP-3BB36BC",ComSpec:"C:\\Windows\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\Windows\\notepad.exe",GIT_ASKPASS:"c:\\Users\\hairo\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",HOME:"C:\\Users\\hairo",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\hairo",HOST:"81.163.25.54",INIT_CWD:"C:\\Users\\hairo\\projects\\wedding\\my-w-app",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\hairo\\AppData\\Local",LOGONSERVER:"\\\\DESKTOP-3BB36BC",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_always_auth:"true",npm_config_cache:"C:\\Users\\hairo\\AppData\\Local\\npm-cache",npm_config_email:"Средство npm требует, чтобы был задан адрес электронной почты, но не использует это значение",npm_config_globalconfig:"C:\\Program Files\\nodejs\\etc\\npmrc",npm_config_global_prefix:"C:\\Program Files\\nodejs",npm_config_init_module:"C:\\Users\\hairo\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\hairo\\projects\\wedding\\my-w-app",npm_config_node_gyp:"C:\\Users\\hairo\\AppData\\Roaming\\nvm\\v20.11.0\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_npm_version:"10.2.4",npm_config_prefix:"C:\\Program Files\\nodejs",npm_config_strict_ssl:"",npm_config_userconfig:"C:\\Users\\hairo\\.npmrc",npm_config_user_agent:"npm/10.2.4 node/v20.11.0 win32 x64 workspaces/false",npm_execpath:"C:\\Users\\hairo\\AppData\\Roaming\\nvm\\v20.11.0\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"tsc && vite build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\hairo\\projects\\wedding\\my-w-app\\package.json",npm_package_name:"wedding-app",npm_package_version:"0.1.0",NPM_PREFIX_NPM_CLI_JS:"C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"16",NVM_HOME:"C:\\Users\\hairo\\AppData\\Roaming\\nvm",NVM_SYMLINK:"C:\\Program Files\\nodejs",OneDrive:"C:\\Users\\hairo\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\hairo\\projects\\wedding\\my-w-app\\node_modules\\.bin;C:\\Users\\hairo\\projects\\wedding\\node_modules\\.bin;C:\\Users\\hairo\\projects\\node_modules\\.bin;C:\\Users\\hairo\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Users\\hairo\\AppData\\Roaming\\nvm\\v20.11.0\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Python310\\Scripts\\;C:\\Python310\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\Cloudflare\\Cloudflare WARP\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\Git\\cmd;C:\\Users\\hairo\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Users\\hairo\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\hairo\\AppData\\Roaming\\npm;C:\\Users\\hairo\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\hairo\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW;.CPL",PORT:"8080",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"AMD64 Family 25 Model 33 Stepping 0, AuthenticAMD",PROCESSOR_LEVEL:"25",PROCESSOR_REVISION:"2100",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PROTOCOL:"http",PSModulePath:"C:\\Users\\hairo\\Documents\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SystemDrive:"C:",SystemRoot:"C:\\Windows",TEMP:"C:\\Users\\hairo\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.90.1",TMP:"C:\\Users\\hairo\\AppData\\Local\\Temp",USERDOMAIN:"DESKTOP-3BB36BC",USERDOMAIN_ROAMINGPROFILE:"DESKTOP-3BB36BC",USERNAME:"hairo",USERPROFILE:"C:\\Users\\hairo",VBOX_MSI_INSTALL_PATH:"C:\\Program Files\\Oracle\\VirtualBox\\",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\hairo\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\hairo\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-7eab853313-sock",VSCODE_INJECTION:"1",VSCODE_NONCE:"eeed3f24-ba6b-4e40-bcf4-f6ff854e8e43",windir:"C:\\Windows"};const M=P.div`

  h1, h2 {
    font-size: 2rem;
    padding: 0 20px;
  }

  input[type="text"] {
    background: transparent;
    border: none;
    font-size: 1.2rem;
    border-bottom: 2px solid ${e=>e.theme.hover};

    &:focus-visible {
      outline: none;
      background: linear-gradient(#e6646577, #9198e577);
    }
  }

  form {
    display: flex;
    flex-direction: column;
    row-gap: 15px;
    height: 100vh;
    margin-top: 100px;
  }

  .form-item {
    display: flex;
    flex-direction: row;
    justify-content: center;
    width: 80%;
    margin: 0 auto;
    column-gap: 10px;
    align-items: center;
    position: relative;

    @media (max-width: 1200px) {
      flex-direction: column;

      label {
      flex-direction: column;
      row-gap: 10px;
      }
    }

    label {
      height: 50px;
      font-size: 1.5rem;
      height: 100%;
      margin-bottom: 10px;
    }
  }

  label {
    display: flex;
    flex-direction: row;
    column-gap: 10px;
    margin: 0 auto;
    text-align: center;
    align-items: center;
  }

  button {
    min-width: 100px;
    width: max-content;
    margin: 0 auto;
    border: none;
    height: 50px;
    background-color: ${e=>e.theme.hover};

    &:hover {
      text-shadow: 1px 1px 4px #000;
    }
  }

  li {
    padding: 10px;
    text-align: center;
    font-size: 2rem;

    svg:hover {
      box-shadow: 1px 1px 12px ${e=>e.theme.hover};
    }
  }
`,b=e=>o.jsxs("li",{children:[o.jsx("span",{children:e.item.author})," - ",o.jsx("span",{children:e.item.name}),o.jsx("span",{onClick:()=>e.onDelete(e.index),children:o.jsx(D,{})})]}),U=()=>{const e=x.useGetUser(),n=i.useGetSongs(),p=i.useDeleteSong(),d=i.useSetSongs(),g=i.useSetSongsNew(),h=O();u.useEffect(()=>{e!=null&&e.name||h("/login?returnUrl=/songs");const a=`${String(e==null?void 0:e.password)}_${String(e==null?void 0:e.name)}`;fetch(`${r.PROTOCOL}://${r.HOST}:${r.PORT}/app/songs?name=${a}`,{method:"GET"}).then(s=>{if(s.status===200)return s.json();throw new Error("Ошибка сервера")}).then(s=>{g(s)}).catch(s=>console.log(1,s))},[]);const C=a=>{a.preventDefault();const s=Array.from(new FormData(a.currentTarget).values()),t=`${String(e==null?void 0:e.password)}_${String(e==null?void 0:e.name)}`;fetch(`${r.PROTOCOL}://${r.HOST}:${r.PORT}/app/songs?name=${t}`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n.concat([{author:s[0],name:s[1]}]))}).then(l=>{l.status===200&&d([{author:s[0],name:s[1]}])}).catch(l=>console.log(1,l))},_=a=>{console.log(219);const s=`${String(e==null?void 0:e.password)}_${String(e==null?void 0:e.name)}`;fetch(`${r.PROTOCOL}://${r.HOST}:${r.PORT}/app/songs?name=${s}`,{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify({index:a})}).then(t=>{t.status===200&&p(a)}).catch(t=>console.log(1,t))};return o.jsxs(o.Fragment,{children:[o.jsx(f,{}),o.jsx(E,{children:o.jsxs(M,{children:[o.jsx("h1",{children:"Вы можете указать какие песни хотели бы услышать и мы постараемся их учесть"}),o.jsxs("div",{className:"songs-list",children:[n.length?o.jsx("h2",{children:"Какие песни будут звучать:"}):null,o.jsx("ul",{children:n.map((a,s)=>o.jsx(b,{onDelete:_,item:a,index:s},s))})]}),o.jsxs("form",{className:"form",onSubmit:C,children:[o.jsx("div",{className:"form-item",children:o.jsxs("label",{children:[o.jsx("span",{children:"Автор"}),o.jsx("input",{type:"text",name:"author"}),o.jsx("span",{children:"Название песни"}),o.jsx("input",{type:"text",name:"song"})]})}),o.jsx("button",{className:"add-item",type:"submit",children:"Добавить песню"})]})]})})]})};export{U as default};
